syntax = "proto3";
package payment_integrations.mtn.v1;


/**
  * The Mtn Svc definition (bff-> mtn-> wallet-> kafka).
 */

//mtn message request to pay intialisation from BFF
message MtnRequestToPayPayload {
  // unique id for the STK push
  string id = 1;
  // PR that initiated it
  string payment_request_id = 3;
  //Kyosk Customer ID
  WalletDef credit_to = 5;
  //The phone number used to make a payment
  int64 msisdn = 7;
  //The transaction amount
  double amount = 10;
  //transaction_status
  MtnStatusPayload status = 12;
}



//mtn message request to pay status request from BFF
message MtnStatusRequestPayload {
  // financial_transaction_id id for the mtn request to pay
  string id = 1;
  // PR that initiated it
  string payment_request_id = 3;

}
//mtn wallet definition
message WalletDef{
  // This is a the users ID
  string user_id = 1;

  string wallet_name = 2;
}


//mtn request to pay status
enum MtnStatusPayload{
  PENDING = 0;
  SUCCESSFUL = 1;
  FAILED = 2;
}





//payer information
message Payer{
string party_id_type = 1;
string party_id = 2;
}

//message Request to pay Status response from MTN
message RequestToPayStatusResponse{
  string financial_transaction_id = 1;
  string external_id = 2;
  double amount = 3;
  string currency = 4;
  Payer payer = 5;
  string payer_message = 6;
  string payee_note = 7;
  MtnStatusPayload status = 8;
  string id = 9;
}


/**
  * The Mtn (svc 2 svc) Service definition.
 */
service MtnService {
  //  request to pay intialization
  rpc RequestToPay(MtnRequestToPayPayload) returns (RequestToPayStatusResponse);
  //  request to pay status (check transaction status)
  rpc RequestToPayStatus(MtnStatusRequestPayload) returns (RequestToPayStatusResponse);

}

