syntax = "proto3";

package dispatch.delivery_trip.v1;


import "google/protobuf/timestamp.proto";
import "dispatch/delivery_note/v1/delivery_note.proto";

enum ResponseCode {
	UNSET = 0;
	SUCCESS = 1;
	FAILURE = 2;
}

enum DeliveryTripStatus{
	UNSET_VALUE = 0;
	DRAFT = 1;
	PUBLISHED = 2;
	DELIVERED = 3;
	COMPLETED = 4;
	PROCESSING = 5;
	PROCESSED = 6;
	DISPATCHING = 7;
	DISPATCHED = 8;
	RESETTING = 9;
	CANCELLED = 10;
}

message DeliveryItemDispatchQty{
	string item_id = 1;
	string count = 2;
}

message DeliveryTrip{
	//The delivery trip code
	string id = 1;
	//The driver code attached to the delivery trip
	string driver_id = 2;
	//The company that the delivery trip is in
	string company_name = 3;
	//The time the delivery trip is transitioned to dispatched
	google.protobuf.Timestamp dispatch_time = 4;
	//The workflow status of the delivery trip
	DeliveryTripStatus status = 5;
	//The list of delivery notes in the delivery trip
	repeated delivery_note.v1.DeliveryNote delivery_note_ids = 6;
	//The value of the items in the delivery trip
	double estimated_value = 7;
	//The value of items delivered in the trip
	double delivered_value =8;
	//The date which the trip is scheduled to be delivered
	google.protobuf.Timestamp scheduled_date = 9;
	//The number of items with their count on the trip
	repeated DeliveryItemDispatchQty item_qty = 10;
	//The territory where the trip is to be delivered
	string territory_id = 11;
	//The date in which the trip is posted
	google.protobuf.Timestamp posting_date = 12;
	google.protobuf.Timestamp updated_date = 13;
	string updated_by = 14;
	string name = 15;
}

//Payload to create a new DeliveryTrip
message PostDeliveryTripRequest {
	//The driver code attached to the delivery trip
	string driver_id = 1;
	//The company that the delivery trip is in
	string company_name = 2;
	//The time the delivery trip is transitioned to dispatched
	google.protobuf.Timestamp dispatch_time = 3;
	//The workflow status of the delivery trip
	DeliveryTripStatus status = 4;
	//The list of delivery notes in the delivery trip
	repeated string delivery_note_ids = 5;
	//The value of the items in the delivery trip
	double estimated_value = 6;
	//The value of items delivered in the trip
	double delivered_value = 7;
	//The number of items with their count on the trip
	repeated DeliveryItemDispatchQty item_qty = 8;
	//The territory where the trip is to be delivered
	string territory_id = 9;
	google.protobuf.Timestamp posting_date = 10;
	google.protobuf.Timestamp updated_date = 11;
	string updated_by = 12;
	string name = 13;
}

//Response from PostDeliveryTripRequest
message PostDeliveryTripResponse {
	ResponseCode response_code = 1;
	string message = 2;
	DeliveryTrip data = 3;
}

//Payload to fetch a Delivery Trip
message GetDeliveryTripRequest {
	string id = 1;
}

//Response from GetDeliveryTripRequest
message GetDeliveryTripResponse {
	ResponseCode response_code = 1;
	string message = 2;
	DeliveryTrip data = 3;
}

//Payload to filter a Delivery Trip
message FilterDeliveryTripRequest {
	string id = 1;
	//The driver code attached to the delivery trip
	string driver_id = 2;
	//The company that the delivery trip is in
	string company_name = 3;
	//The time the delivery trip is transitioned to dispatched
	google.protobuf.Timestamp dispatch_time = 4;
	//The workflow status of the delivery trip
	DeliveryTripStatus status = 5;
	//The list of delivery notes in the delivery trip
	repeated string delivery_note_ids = 6;
	//The territory where the trip is to be delivered
	string territory_id = 7;
	int32 page_size = 8;
	int32 page_number = 9;
	google.protobuf.Timestamp to_date = 10;
	google.protobuf.Timestamp from_date = 11;
	string name = 12;
}

//Response from FilterDeliveryTripRequest
message FilterDeliveryTripResponse {
	ResponseCode response_code = 1;
	string message = 2;
	repeated DeliveryTrip data = 3;
	int32 page_size = 4;
	int32 page_number = 5;
	google.protobuf.Timestamp to_date = 6;
	google.protobuf.Timestamp from_date = 7;
}

message TransitionDeliveryTripRequest {
	string id = 1;
	string delivery_trip_id = 2;
	string delivery_trip_name = 3;
	DeliveryTripStatus workflow_state = 4;
	string reason = 5;
}

message TransitionDeliveryTripResponse {
	ResponseCode response_code = 1;
	string message = 2;
	DeliveryTrip data = 3;
}

message RemoveDeliveryNoteRequest {
	string id = 1;
	string delivery_trip_name = 2;
	string delivery_note_name = 3;
}

message RemoveDeliveryNoteResponse {
	ResponseCode response_code = 1;
	string message = 2;
	DeliveryTrip data = 3;
}

//Service definition
service DeliveryTripService {
	rpc PostDeliveryTrip(PostDeliveryTripRequest) returns (PostDeliveryTripResponse) {}
	rpc GetDeliveryTrip(GetDeliveryTripRequest) returns (GetDeliveryTripResponse) {}
	rpc FilterDeliveryTrip(FilterDeliveryTripRequest) returns (FilterDeliveryTripResponse) {}
	rpc TransitionDeliveryTrip(TransitionDeliveryTripRequest) returns (TransitionDeliveryTripResponse) {}
	rpc RemoveDeliveryNote(RemoveDeliveryNoteRequest) returns (RemoveDeliveryNoteResponse) {}
}