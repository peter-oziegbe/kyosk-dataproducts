syntax = "proto3";

package dispatch.delivery_trip.v1;


import "google/protobuf/timestamp.proto";

enum DeliveryTripStatus{
	DRAFT = 0;
	PUBLISHED = 1;
	DELIVERED = 2;
	COMPLETED = 3;
	PROCESSING = 4;
	PROCESSED = 5;
	DISPATCHING = 6;
	DISPATCHED = 7;
	RESETTING = 8;
	CANCELLED = 9;
}

message DeliveryItemDispatchQty{
	string item_id = 1;
	string count = 2;
}

message DeliveryTrip{
	//The delivery trip code
	string id = 1;
	//The driver code attached to the delivery trip
	string driver_id = 2;
	//The company that the delivery trip is in
	string company_name = 3;
	//The time the delivery trip is transitioned to dispatched
	google.protobuf.Timestamp dispatch_time = 4;
	//The workflow status of the delivery trip
	DeliveryTripStatus status = 5;
	//The list of delivery notes in the delivery trip
	repeated string delivery_note_ids = 6;
	//The value of the items in the delivery trip
	double estimated_value = 7;
	//The value of items delivered in the trip
	double delivered_value =8;
	//The date which the trip is scheduled to be delivered
	google.protobuf.Timestamp scheduled_date = 9;
	//The number of items with their count on the trip
	repeated DeliveryItemDispatchQty item_qty = 10;
	//The territory where the trip is to be delivered
	string territory_id = 11;
	//The date in which the trip is posted
	google.protobuf.Timestamp posting_date = 12;
}

//Payload to create a new DeliveryTrip
message PostDeliveryTripRequest {
	//The driver code attached to the delivery trip
	string driver_id = 1;
	//The company that the delivery trip is in
	string company_name = 2;
	//The time the delivery trip is transitioned to dispatched
	google.protobuf.Timestamp dispatch_time = 3;
	//The workflow status of the delivery trip
	DeliveryTripStatus status = 4;
	//The list of delivery notes in the delivery trip
	repeated string delivery_note_ids = 5;
	//The value of the items in the delivery trip
	double estimated_value = 6;
	//The value of items delivered in the trip
	double delivered_value = 7;
	//The number of items with their count on the trip
	repeated DeliveryItemDispatchQty item_qty = 8;
	//The territory where the trip is to be delivered
	string territory_id = 9;
}

//Response from PostDeliveryTripRequest
message PostDeliveryTripResponse {
	int32 response_code = 1;
	string message = 2;
	DeliveryTrip data = 3;
}

//Payload to fetch a Delivery Trip
message GetDeliveryTripRequest {
	string id = 1;
}

//Response from GetDeliveryTripRequest
message GetDeliveryTripResponse {
	int32 response_code = 1;
	string message = 2;
	DeliveryTrip data = 3;
}

//Payload to filter a Delivery Trip
message FilterDeliveryTripRequest {
	string id = 1;
	//The driver code attached to the delivery trip
	string driver_id = 2;
	//The company that the delivery trip is in
	string company_name = 3;
	//The time the delivery trip is transitioned to dispatched
	google.protobuf.Timestamp dispatch_time = 4;
	//The workflow status of the delivery trip
	DeliveryTripStatus status = 5;
	//The list of delivery notes in the delivery trip
	repeated string delivery_note_ids = 6;
	//The territory where the trip is to be delivered
	string territory_id = 7;
}

//Response from FilterDeliveryTripRequest
message FilterDeliveryTripResponse {
	int32 response_code = 1;
	string message = 2;
	repeated DeliveryTrip data = 3;
	int32 page_size = 4;
	int32 page_number = 5;
}

//Service definition
service DeliveryTripService {
	rpc PostDeliveryTrip(PostDeliveryTripRequest) returns (PostDeliveryTripResponse) {}
	rpc GetDeliveryTrip(GetDeliveryTripRequest) returns (GetDeliveryTripResponse) {}
	rpc FilterDeliveryTrip(FilterDeliveryTripRequest) returns (FilterDeliveryTripResponse) {}
}