syntax = "proto3";
package sourcing.agent.v1;

import "google/protobuf/timestamp.proto";
import "common/shared/v1/shared.proto";

message StoreLocation { //TODO: check if this is the right way to do it
  double  latitude = 1;
  double  longitude = 2;
}

message NextOfKin {
  string first_name = 1;
  string last_name = 2;
  string phone_number = 3;
  string relationship = 4;
}

message KycData{
  string first_name = 1;
  string last_name = 2;
  string owner_phone_number = 3;
  StoreLocation store_location = 4;
  string kyosk_territory = 5;
  string country = 6;
  string date_of_birth = 7;
  string gender = 8;
  string id_number = 9;
  string id_image = 10;
  string kra_pin_number = 11;
  string kra_pin_image = 12;
  repeated NextOfKin next_of_kin = 13;
  string source_of_money = 14;
  string employment_status = 15;

}

enum KycStatus {
  IN_PROGRESS = 0;
  VERIFIED = 1;
  VERIFICATION_FAILED = 2;
  PROCESSING_ERROR = 3;
}

message KycPartnerResponse {
  string response = 1;
}

message KycPartner {
  string request_id = 1;
  string response_id = 2;
  google.protobuf.Timestamp response_time = 3;
  string kyc_partner = 4;
  string request_attempts = 5;
  repeated KycPartnerResponse kyc_partner_response = 6;
}

message AgentKyc {
  string id = 1;
  string retailer_id = 2;
  common.shared.v1.CountryCode country_code = 3;
  KycStatus status = 4;
  KycData kyc_data = 5;
  KycPartner kyc_partner = 6;
  google.protobuf.Timestamp created_at = 11;
  google.protobuf.Timestamp updated_at = 12;
}