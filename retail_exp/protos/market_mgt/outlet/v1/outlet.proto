syntax = "proto3";

package market_mgt.outlet.v1;

import "google/protobuf/timestamp.proto";
import "utils/v1/pagination.proto";
import "utils/v1/headers.proto";

// Represents a outlet
message Outlet{
  // Outlet unique Id
  string id = 1;
  //  FK id representing the  Retailer
  string retailer_id = 2;
  // Outlet Name
  string name = 3;
  // GPS Coordinates
  // Outlet latitude
  string latitude = 4;
  // Outlet longitude
  string  longitude = 5;
  // FK id representing the  Territory
  string territory_id = 6;
  // FK id representing the Route
  string route_id = 7;
  // Agent id who created the outlet
  string created_by = 8;
  // Boolean active
  bool active = 9;
  // Location description
  string location_description = 10;
  // Time this outlet was created
  google.protobuf.Timestamp created_at = 11;
  // Id of user that updated this outlet
  string updated_by = 12;
  // Time this outlet  was updated
  google.protobuf.Timestamp updated_at = 13;
  // Outlet's phone number
  string phone_number = 14;
  //Outlet code
  string outlet_code = 15;
}

// Request to create an Outlet
message CreateOutletRequest {
  Outlet outlet = 1;
  //  used to pass extra data filed or filters
  repeated utils.v1.Header headers = 2;

}
// request to an outlet by id for either get or deactivate
message OutletRequest {
  string outlet_id = 1;
  string retailer_id = 2;
  string outlet_code = 3;
  // Id of user that updated this retailer
  string updated_by = 4;
  //  used to pass extra data filed or filters
  repeated utils.v1.Header headers = 5;

}
// Object to query outlet by a number of fields
message OutletQuery {
  string outlet_id = 1;
  string retailer_id = 2;
  string outlet_code = 3;
  string phone_number = 4;
  string name = 5;
  repeated string route_id = 6;
  bool active = 7;
  string created_by = 8;
}

// Response to the Outlet Request for create,update and deactivate
message OutletResponse {
  int32 response_code = 1;
  string message = 2;
  Outlet outlet = 3;
}

// Response to the Outlet Request for  get
message OutletsResponse {
  int32 response_code = 1;
  string message = 2;
  repeated Outlet outlets = 3;
}

// Request to update Outlet Request
message UpdateOutletRequest {
  string outlet_id = 1;
  Outlet data = 2;
  // Id of user that updated this retailer
  string updated_by = 3;
  //  used to pass extra data filed or filters
  repeated utils.v1.Header headers = 4;

}

//Request for a paginated list of retailers
message GetPaginatedOutletsRequest{
  OutletQuery query = 1;
  int32 page = 2;
  int32 size = 3;
  string sort_by = 4;
}

//Response for a paginated list of retailers
message GetPaginatedOutletsResponse{
  int32 response_code = 1;
  string message = 2;
  repeated Outlet outlets = 3;
  utils.v1.Pagination pagination = 4;
}

// Service definition
service OutletService {
  rpc CreateOutlet(CreateOutletRequest) returns (OutletResponse){}
  rpc UpdateOutlet(UpdateOutletRequest) returns (OutletResponse){}
  rpc DeactivateOutlet(OutletRequest) returns (OutletResponse){}
  rpc GetOutlet(OutletRequest) returns (OutletsResponse) {}
  rpc GetPaginatedOutlets(GetPaginatedOutletsRequest) returns (GetPaginatedOutletsResponse){}
}